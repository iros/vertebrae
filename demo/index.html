<!doctype html>
<html lang=en>
<head>
  <meta charset=utf-8>
  <meta http-equiv=X-UA-Compatible content=IE=edge,chrome=1>

  <title>Bone</title>
</head>

<body>
  
  <script src="js/libs/jquery.js"></script>
  <script src="js/libs/underscore.js"></script>
  <script src="js/libs/backbone.js"></script>
  <script src="../vertebrae.js"></script>
  <script>

    MyModel = Backbone.Model.extend({
      urlRoot: "/mymodel"
    });

    var AppStaging = Backbone.Vertebrae.extend({
      //profile: "app-staging",

      routes: {
        "/mymodel/:id": {
          GET: function(id) {
            return '{ "id": '+ id +', "hi": "lol", "goodbye": "cry" }';
          }
        }
      }
    });

    new AppStaging();

    var lol = new MyModel({ id: 0 });
    var lol2 = new MyModel({ id: 1 });

    lol.fetch({
      sucess: function() { console.log('success', this, arguments) },
      error: function() { console.log('error', this, arguments) }
    });

    $.when(lol.fetch(), lol2.fetch()).then(function() {
      console.log(lol.get("hi"), lol2.get("goodbye")); // lol cry
    });

    // First save the models to the server
    //$.when(lol.save(), lol2.save()).then(function() {
    //  // Reset the models
    //  lol.clear(); lol2.clear();
    //  // Now fetch them again from the persistence
    //  $.when(lol.fetch(), lol2.fetch()).then(function() {
    //    console.log(lol.get("hi"), lol2.get("goodbye"));
    //  });
    //});

  </script>
</body>
</html>
